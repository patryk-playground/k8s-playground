# check current configuration
kubectl config current-context
kubectl config get-contexts


# create a new user
openssl genrsa -out user00.key 2048
openssl req -new -key user00.key -out user00.csr -subj "/CN=user00/O=training"
openssl x509 -req -in user00.csr -CA /etc/kubernetes/pki/ca.crt -CAkey /etc/kubernetes/pki/ca.key -CAcreateserial -out user00.crt -days 14
kubectl config set-credentials user00 --client-certificate=user00.crt  --client-key=user00.key
kubectl config set-context user00-context --cluster=kubernetes --namespace=user00 --user=user00


# check lack of any privileges
kubectl --context=user00-context get deploy,pod
or
kubectl config use-context user00-context
kubectl get deploy,pod


# add privileges
kubectl create -f user00-role-and-rolebinding.yaml


# another way to check privileges
kubectl auth can-i create pod
kubectl auth can-i create svc
